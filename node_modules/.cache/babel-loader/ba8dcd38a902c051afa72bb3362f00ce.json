{"ast":null,"code":"var _jsxFileName = \"/Users/fe.oliveira/Documents/Dev/React/roteirizador/src/components/PreviewRoterizador/index.js\";\nimport React, { Component } from 'react';\nimport './index.css';\n\nclass PreviewRoterizador extends Component {\n  constructor(props) {\n    super();\n    this.state({\n      arr_route: props.arr_route && props.arr_route[0] && props.arr_route[0].metadata && props.arr_route[0].metadata.lat ? this.props.arr_route : []\n    });\n  }\n\n  componentWillReceiveProps() {\n    let arr_route = this.state.arr_route;\n\n    if (arr_route.length > 0) {\n      const directionsService = new window.google.maps.DirectionsService();\n      var origin,\n          destination = null;\n      var waypoints = [];\n      let count = 0;\n\n      for (let i in arr_route) {\n        if (arr_route[i].metadata && arr_route[i].metadata.lat) {\n          if (count === 0) {\n            origin = {\n              lat: arr_route[i].metadata.lat,\n              lng: arr_route[i].metadata.lng\n            };\n          } else if (count === 1) {\n            destination = {\n              lat: arr_route[i].metadata.lat,\n              lng: arr_route[i].metadata.lng\n            };\n          } else {\n            waypoints.push({\n              location: arr_route[i].metadata.lat + \",\" + arr_route[i].metadata.lng,\n              stopover: true\n            });\n          }\n\n          count++;\n        }\n      }\n\n      directionsService.route({\n        origin: origin,\n        destination: destination,\n        waypoints: waypoints,\n        optimizeWaypoints: true,\n        travelMode: window.google.maps.TravelMode.DRIVING\n      }, (result, status) => {\n        if (status === window.google.maps.DirectionsStatus.OK) {\n          if (result.routes && result.routes[0] && result.routes[0].legs) {\n            console.log('preview');\n            console.log(result.routes[0].legs);\n            console.log('final');\n          }\n\n          this.setState({\n            directions: result\n          });\n        } else {\n          console.error(\"error fetching directions \".concat(result));\n        }\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      \"data-component\": \"preview-roterizador\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      \"data-preview-route\": true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Dist\\xE2ncia:\"), \" 2km \"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Tempo Estimado:\"), \" 6 minutos \")));\n  }\n\n}\n\nexport default PreviewRoterizador;","map":{"version":3,"sources":["/Users/fe.oliveira/Documents/Dev/React/roteirizador/src/components/PreviewRoterizador/index.js"],"names":["React","Component","PreviewRoterizador","constructor","props","state","arr_route","metadata","lat","componentWillReceiveProps","length","directionsService","window","google","maps","DirectionsService","origin","destination","waypoints","count","i","lng","push","location","stopover","route","optimizeWaypoints","travelMode","TravelMode","DRIVING","result","status","DirectionsStatus","OK","routes","legs","console","log","setState","directions","error","render"],"mappings":"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","sourcesContent":["import React,\n      { Component } from 'react';\n\nimport './index.css';\n\nclass PreviewRoterizador extends Component {\n\n  constructor( props )\n  {\n\n    super();\n\n    this.state({\n      arr_route: props.arr_route && props.arr_route[0] && props.arr_route[0].metadata && props.arr_route[0].metadata.lat ? this.props.arr_route : []\n    })\n\n  }\n\n  componentWillReceiveProps() {\n\n    let { arr_route } = this.state;\n\n    if( arr_route.length > 0 ){\n\n      const directionsService = new window.google.maps.DirectionsService();\n\n      var origin, destination = null;\n      var waypoints = [];\n\n      let count = 0;\n      for( let i in arr_route ){\n\n        if( arr_route[i].metadata && arr_route[i].metadata.lat ){\n\n          if( count === 0 ){\n              origin = { lat: arr_route[i].metadata.lat, lng: arr_route[i].metadata.lng }\n          } else if( count === 1 ){\n              destination = { lat: arr_route[i].metadata.lat, lng: arr_route[i].metadata.lng }\n          } else {\n              waypoints.push( { location: arr_route[i].metadata.lat + \",\" + arr_route[i].metadata.lng, stopover: true } );\n          }\n\n          count++;\n\n        }\n\n      }\n\n\n      directionsService.route(\n        {\n          origin: origin,\n          destination: destination,\n          waypoints: waypoints,\n          optimizeWaypoints: true,\n          travelMode: window.google.maps.TravelMode.DRIVING\n        },\n        (result, status) => {\n          if (status === window.google.maps.DirectionsStatus.OK) {\n\n            if( result.routes && result.routes[0] && result.routes[0].legs ){\n                console.log('preview' )\n                console.log( result.routes[0].legs );\n                console.log('final' )\n            }\n\n            this.setState({\n              directions: result\n            });\n          } else {\n            console.error(`error fetching directions ${result}`);\n          }\n        }\n      );\n\n    }\n\n  }\n\n  render() {\n\n    return (\n      <div data-component=\"preview-roterizador\">\n\n        <div data-preview-route>\n          <p><span>Dist√¢ncia:</span> 2km </p>\n          <p><span>Tempo Estimado:</span> 6 minutos </p>\n        </div>\n\n      </div>\n    );\n\n  }\n\n}\nexport default PreviewRoterizador;\n"]},"metadata":{},"sourceType":"module"}