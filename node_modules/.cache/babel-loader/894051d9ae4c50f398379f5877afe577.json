{"ast":null,"code":"var _jsxFileName = \"/Users/fe.oliveira/Documents/Dev/git/roteirizador/src/components/FormRegister/index.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { register, login } from './../../actions/authAction';\nimport './../FormLogin/index.css';\n\nclass FormRegister extends Component {\n  constructor(props) {\n    super();\n    this.state = {\n      full_name: \"\",\n      email: \"\",\n      password: \"\",\n      loading: false,\n      error: \"\"\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  updateState(field, value) {\n    this.setState({\n      [field]: value\n    });\n  }\n\n  async handleSubmit(e) {\n    e.preventDefault();\n    let _this$state = this.state,\n        full_name = _this$state.full_name,\n        email = _this$state.email,\n        password = _this$state.password;\n    e.preventDefault();\n    this.setState({\n      loading: true\n    });\n    let response = await register(full_name, email, password);\n\n    if (response.success === true && response.metadata && response.metadata[0] && response.metadata[0]._id) {\n      response = await login(email, password);\n\n      if (response.success && response.metadata && response.metadata.authenticated === true) {\n        window.location.reload();\n      } else {\n        this.setState({\n          error: \"Erro ao tentar logar, pela pagina de login\",\n          loading: false\n        });\n      }\n    } else {\n      let error = response.error ? response.error : \"Erro ao criar sua conta\";\n      this.setState({\n        error: error,\n        loading: false\n      });\n    }\n  }\n\n  render() {\n    let _this$state2 = this.state,\n        email = _this$state2.email,\n        password = _this$state2.password,\n        loading = _this$state2.loading,\n        error = _this$state2.error,\n        full_name = _this$state2.full_name;\n    let texts = this.props.texts;\n    return React.createElement(\"div\", {\n      \"data-component\": \"form-login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      \"data-form-type\": loading === true ? \"loading\" : \"\",\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      \"data-header\": true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"icon-map\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, texts.titleå)), React.createElement(\"div\", {\n      \"data-field\": true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"icon-smiley\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      value: full_name,\n      onChange: e => {\n        this.updateState(\"full_name\", e.target.value);\n      },\n      placeholder: texts.form.full_name.placeholder,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      \"data-field\": true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"icon-mail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"email\",\n      value: email,\n      onChange: e => {\n        this.updateState(\"email\", e.target.value);\n      },\n      placeholder: texts.form.email.placeholder,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      \"data-field\": true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"icon-key\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"password\",\n      value: password,\n      onChange: e => {\n        this.updateState(\"password\", e.target.value);\n      },\n      placeholder: texts.form.password.placeholder,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    })), error && error !== \"\" ? React.createElement(\"p\", {\n      \"data-error\": true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, error) : \"\", React.createElement(\"button\", {\n      \"data-submit\": true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, texts.form.button_submit.text), React.createElement(Link, {\n      to: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      \"data-link\": true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, texts.link_login.text))));\n  }\n\n}\n\nexport default FormRegister;","map":{"version":3,"sources":["/Users/fe.oliveira/Documents/Dev/git/roteirizador/src/components/FormRegister/index.js"],"names":["React","Component","Link","register","login","FormRegister","constructor","props","state","full_name","email","password","loading","error","handleSubmit","bind","updateState","field","value","setState","e","preventDefault","response","success","metadata","_id","authenticated","window","location","reload","render","texts","titleå","target","form","placeholder","button_submit","text","link_login"],"mappings":"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","sourcesContent":["import React,\n       { Component }            from 'react';\nimport { Link }                 from 'react-router-dom';\nimport {  register,\n          login            }    from './../../actions/authAction';\nimport './../FormLogin/index.css';\n\nclass FormRegister extends Component {\n\n  constructor( props )\n  {\n\n    super();\n\n    this.state = {\n      full_name : \"\",\n      email     : \"\",\n      password  : \"\",\n      loading   : false,\n      error     : \"\"\n    }\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n\n  }\n\n  updateState( field, value )\n  {\n\n    this.setState({\n      [field]: value\n    })\n\n  }\n\n  async handleSubmit( e )\n  {\n\n    e.preventDefault();\n\n    let { full_name,\n          email,\n          password } = this.state;\n\n    e.preventDefault();\n\n    this.setState({\n      loading: true,\n    });\n\n    let response = await register( full_name, email, password);\n\n    if( response.success === true && response.metadata && response.metadata[0] && response.metadata[0]._id ){\n\n      response = await login( email, password);\n\n      if( response.success && response.metadata && response.metadata.authenticated === true ) {\n        window.location.reload();\n      } else {\n\n        this.setState({\n          error   : \"Erro ao tentar logar, pela pagina de login\",\n          loading : false,\n        })\n\n      }\n\n    } else {\n\n      let error = response.error\n                  ? response.error\n                  : \"Erro ao criar sua conta\"\n\n      this.setState({\n        error: error,\n        loading: false,\n      })\n\n    }\n\n  }\n\n  render()\n  {\n\n    let { email,\n          password,\n          loading,\n          error,\n          full_name     } = this.state;\n\n    let { texts } = this.props;\n\n    return (\n      <div data-component=\"form-login\">\n\n        <form data-form-type={\n            loading === true\n            ? \"loading\"\n            : \"\"\n          }\n          onSubmit={this.handleSubmit}>\n          <div data-header>\n            <i className=\"icon-map\"></i>\n            <h1>{texts.titleå}</h1>\n          </div>\n\n          <div data-field>\n            <i className=\"icon-smiley\"></i>\n            <input\n              type=\"text\"\n              value={full_name}\n              onChange={ ( e ) => { this.updateState( \"full_name\", e.target.value ) }}\n              placeholder={texts.form.full_name.placeholder}   />\n          </div>\n\n          <div data-field>\n            <i className=\"icon-mail\"></i>\n            <input\n              type=\"email\"\n              value={email}\n              onChange={ ( e ) => { this.updateState( \"email\", e.target.value ) }}\n              placeholder={texts.form.email.placeholder}   />\n          </div>\n\n          <div data-field>\n            <i className=\"icon-key\"></i>\n            <input\n              type=\"password\"\n              value={password}\n              onChange={ ( e ) => { this.updateState( \"password\", e.target.value ) }}\n              placeholder={texts.form.password.placeholder} />\n          </div>\n\n          {\n            error && error !== \"\"\n            ? (<p data-error>{error}</p>)\n            : \"\"\n          }\n\n          <button data-submit>\n            {texts.form.button_submit.text}\n          </button>\n\n          <Link to=\"/login\"><p data-link>{texts.link_login.text}</p></Link>\n        </form>\n\n      </div>\n    );\n\n  }\n\n}\n\nexport default FormRegister;\n"]},"metadata":{},"sourceType":"module"}