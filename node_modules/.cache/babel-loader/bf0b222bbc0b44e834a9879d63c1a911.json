{"ast":null,"code":"var _jsxFileName = \"/Users/fe.oliveira/Documents/Dev/git/roteirizador/src/components/FormLogin/index.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { login } from './../../actions/authAction';\nimport { checkHasValue, checkPassword, checkEmail } from './../../utils/formValidate';\nimport './index.css';\n\nclass FormLogin extends Component {\n  constructor(props) {\n    super();\n    this.state = {\n      email: \"\",\n      password: \"\",\n      loading: false,\n      error: \"\"\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  updateState(field, value) {\n    this.setState({\n      [field]: value\n    });\n  }\n\n  validate() {\n    let _this$state = this.state,\n        email = _this$state.email,\n        password = _this$state.password;\n    let error_messages = this.props.error_messages;\n\n    if (!checkHasValue(email) || !checkHasValue(password)) {\n      return {\n        validate: false,\n        error: error_messages.all_inputs_is_requited\n      };\n    }\n\n    if (!checkEmail(email)) {\n      return {\n        validate: false,\n        error: error_messages.email_invalid\n      };\n    }\n\n    if (!checkPassword(password)) {\n      return {\n        validate: false,\n        error: error_messages.password_invalid\n      };\n    }\n\n    return true;\n  }\n\n  async handleSubmit(e) {\n    let _this$state2 = this.state,\n        email = _this$state2.email,\n        password = _this$state2.password;\n    let error_messages = this.props.error_messages;\n    e.preventDefault();\n    let validation = this.validate();\n\n    if (validation === true) {\n      this.setState({\n        loading: true\n      });\n      let response = await login(email, password);\n\n      if (response.success && response.metadata && response.metadata.authenticated === true) {\n        window.location.reload();\n      } else {\n        this.setState({\n          error: error_messages.login_invalid,\n          loading: false\n        });\n      }\n    } else {\n      this.setState({\n        error: validation.error,\n        loading: false\n      });\n    }\n  }\n\n  render() {\n    let _this$state3 = this.state,\n        email = _this$state3.email,\n        password = _this$state3.password,\n        loading = _this$state3.loading,\n        error = _this$state3.error;\n    let texts = this.props.texts;\n    return React.createElement(\"div\", {\n      \"data-component\": \"form-login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      \"data-form-type\": loading === true ? \"loading\" : \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      \"data-header\": true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"icon-map\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, texts.title)), React.createElement(\"div\", {\n      \"data-field\": true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"icon-mail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"email\",\n      value: email,\n      onChange: e => {\n        this.updateState(\"email\", e.target.value);\n      },\n      placeholder: texts.form.email.placeholder,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      \"data-field\": true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"icon-key\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"password\",\n      value: password,\n      onChange: e => {\n        this.updateState(\"password\", e.target.value);\n      },\n      placeholder: texts.form.password.placeholder,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    })), error && error !== \"\" ? React.createElement(\"p\", {\n      \"data-error\": true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, error) : \"\", React.createElement(\"button\", {\n      \"data-submit\": true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, texts.form.button_submit.text), React.createElement(Link, {\n      to: \"/register\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      \"data-link\": true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, texts.link_register.text))));\n  }\n\n}\n\nexport default FormLogin;","map":{"version":3,"sources":["/Users/fe.oliveira/Documents/Dev/git/roteirizador/src/components/FormLogin/index.js"],"names":["React","Component","Link","login","checkHasValue","checkPassword","checkEmail","FormLogin","constructor","props","state","email","password","loading","error","handleSubmit","bind","updateState","field","value","setState","validate","error_messages","all_inputs_is_requited","email_invalid","password_invalid","e","preventDefault","validation","response","success","metadata","authenticated","window","location","reload","login_invalid","render","texts","title","target","form","placeholder","button_submit","text","link_register"],"mappings":"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","sourcesContent":["import React,\n       { Component }          from 'react';\nimport { Link }               from 'react-router-dom';\nimport {  login             } from './../../actions/authAction';\nimport {  checkHasValue,\n          checkPassword,\n          checkEmail         } from './../../utils/formValidate';\n\nimport './index.css';\n\nclass FormLogin extends Component {\n\n  constructor( props )\n  {\n\n    super();\n\n    this.state = {\n      email     : \"\",\n      password  : \"\",\n      loading   : false,\n      error     : \"\"\n    }\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n\n  }\n\n  updateState( field, value )\n  {\n\n    this.setState({\n      [field]: value\n    })\n\n  }\n\n  validate()\n  {\n\n    let { email,\n          password }       = this.state;\n    let { error_messages } = this.props;\n\n    if( !checkHasValue( email ) || !checkHasValue( password ) ){\n\n      return {\n        validate: false,\n        error   : error_messages.all_inputs_is_requited\n      }\n\n    }\n\n    if( !checkEmail( email )  ){\n\n      return {\n        validate: false,\n        error   : error_messages.email_invalid\n      }\n\n    }\n\n    if( !checkPassword( password )  ){\n\n      return {\n        validate: false,\n        error   : error_messages.password_invalid\n      }\n\n    }\n\n    return true;\n\n  }\n\n  async handleSubmit( e )\n  {\n\n    let { email,\n          password }        = this.state;\n    let { error_messages }  = this.props;\n\n    e.preventDefault();\n\n    let validation = this.validate();\n\n    if( validation === true ){\n\n      this.setState({\n        loading: true,\n      })\n\n      let response = await login( email, password);\n\n      if( response.success && response.metadata && response.metadata.authenticated === true ) {\n        window.location.reload();\n      } else {\n\n        this.setState({\n          error: error_messages.login_invalid,\n          loading: false,\n        })\n\n      }\n\n    } else {\n\n      this.setState({\n        error   : validation.error,\n        loading : false,\n      })\n\n    }\n\n\n  }\n\n  render()\n  {\n\n    let { email,\n          password,\n          loading,\n          error     } = this.state;\n\n    let { texts }     = this.props;\n\n    return (\n      <div data-component=\"form-login\">\n\n        <form\n          onSubmit={this.handleSubmit}\n          data-form-type={\n            loading === true\n            ? \"loading\"\n            : \"\"\n          } >\n\n          <div data-header>\n            <i className=\"icon-map\"></i>\n            <h1>{texts.title}</h1>\n          </div>\n\n          <div data-field>\n\n            <i className=\"icon-mail\"></i>\n            <input\n              type=\"email\"\n              value={email}\n              onChange={ ( e ) => { this.updateState( \"email\", e.target.value ) }}\n              placeholder={texts.form.email.placeholder}   />\n\n          </div>\n\n          <div data-field>\n\n            <i className=\"icon-key\"></i>\n            <input\n              type=\"password\"\n              value={password}\n              onChange={ ( e ) => { this.updateState( \"password\", e.target.value ) }}\n              placeholder={texts.form.password.placeholder}/>\n\n          </div>\n\n          {\n            error && error !== \"\"\n            ? (<p data-error>{error}</p>)\n            : \"\"\n          }\n\n          <button data-submit>\n            {texts.form.button_submit.text}\n          </button>\n\n          <Link to=\"/register\"><p data-link>{texts.link_register.text}</p></Link>\n        </form>\n\n      </div>\n    );\n\n  }\n\n}\n\nexport default FormLogin;\n"]},"metadata":{},"sourceType":"module"}